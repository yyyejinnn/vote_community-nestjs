// *** DO NOT EDIT. GENERATED BY PRISMIX. ***
generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["filteredRelationCount"]
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model Users {
    id           Int            @id @default(autoincrement())
    email        String         @unique
    password     String
    nickname     String
    refreshToken RefreshTokens? @relation(name: "RefreshTokensToUsers")
    createdAt    DateTime       @default(now())
    updatedAt    DateTime       @updatedAt
    votes        Votes[]        @relation(name: "UsersToVotes")
    votedUsers   VotedUsers[]   @relation(name: "UsersToVotedUsers")

    @@map("users")
}

model RefreshTokens {
    token     String   @unique
    user      Users    @relation(name: "RefreshTokensToUsers", fields: [userId], references: [id])
    userId    Int      @unique
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("refresh-tokens")
}

model Votes {
    id          Int           @id @default(autoincrement())
    title       String
    user        Users         @relation(name: "UsersToVotes", fields: [userId], references: [id])
    userId      Int
    createdAt   DateTime      @default(now())
    updatedAt   DateTime      @updatedAt
    voteChoices VoteChoices[] @relation(name: "VoteChoicesToVotes")
    votedUsers  VotedUsers[]  @relation(name: "VotedUsersToVotes")

    @@map("votes")
}

model VoteChoices {
    id         Int          @id @default(autoincrement())
    title      String
    vote       Votes        @relation(name: "VoteChoicesToVotes", fields: [voteId], references: [id])
    voteId     Int
    createdAt  DateTime     @default(now())
    updatedAt  DateTime     @updatedAt
    votedUsers VotedUsers[] @relation(name: "VoteChoicesToVotedUsers")

    @@map("vote-options")
}

model VotedUsers {
    user         Users       @relation(name: "UsersToVotedUsers", fields: [userId], references: [id])
    userId       Int
    vote         Votes       @relation(name: "VotedUsersToVotes", fields: [voteId], references: [id])
    voteId       Int
    voteChoice   VoteChoices @relation(name: "VoteChoicesToVotedUsers", fields: [voteChoiceId], references: [id])
    voteChoiceId Int
    createdAt    DateTime    @default(now())
    updatedAt    DateTime    @updatedAt

    @@id([userId, voteChoiceId])
    @@map("voted-users")
}
