model Votes {
    id         Int      @id @default(autoincrement())
    title      String
    startDate  DateTime @default(now())
    endDate    DateTime
    writer     Users    @relation("VoteWriter", fields: [writerId], references: [id])
    writerId   Int
    likedUsers Users[]  @relation("LikedVoteUsers")
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    voteChoices  VoteChoices[]
    votedUsers   VotedUsers[]
    VoteComments VoteComments[]

    @@map("votes")
}

model VoteChoices {
    id        Int      @id @default(autoincrement())
    title     String
    vote      Votes    @relation(fields: [voteId], references: [id], onDelete: Cascade)
    voteId    Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    votedUsers VotedUsers[]

    @@map("vote-options")
}

model VotedUsers {
    id           Int         @id @default(autoincrement())
    user         Users       @relation(fields: [userId], references: [id])
    userId       Int
    vote         Votes       @relation(fields: [voteId], references: [id], onDelete: Cascade)
    voteId       Int
    voteChoice   VoteChoices @relation(fields: [voteChoiceId], references: [id], onDelete: Cascade)
    voteChoiceId Int
    createdAt    DateTime    @default(now())
    updatedAt    DateTime    @updatedAt

    @@unique([userId, voteChoiceId])
    @@unique([userId, voteId])
    @@map("voted-users")
}

model VoteComments {
    id         Int      @id @default(autoincrement())
    content    String
    writer     Users    @relation("VoteCommentWriter", fields: [writerId], references: [id])
    writerId   Int
    vote       Votes    @relation(fields: [voteId], references: [id], onDelete: Cascade)
    voteId     Int
    likedUsers Users[]  @relation("LikedVoteCommentUsers")
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    @@map("vote-comments")
}

model Users {
    id                  Int            @id @default(autoincrement())
    votedUsers          VotedUsers[]
    writtenVotes        Votes[]        @relation("VoteWriter")
    likedVotes          Votes[]        @relation("LikedVoteUsers")
    writtenVoteComments VoteComments[] @relation("VoteCommentWriter")
    likedVoteComments   VoteComments[] @relation("LikedVoteCommentUsers")

    @@map("users")
}
